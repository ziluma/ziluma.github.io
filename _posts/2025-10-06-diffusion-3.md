---
layout: post
title: "Diffusion-III DDIM"
date: 2025-10-06
math: true
published: true
---

We go over DDIM [Denoising Diffusion Implicit Models](https://arxiv.org/abs/2010.02502) by J. Song et al 2020.


Recall that [DDPM](https://ziluma.github.io/2025/09/28/diffusion-1.html) assumes forward and backward processes are Markov. DDPM prescribes $p(x_t\mid x_{t-1})$ and then obtains $p(x_t\mid x_0)$ and $p(x_{t-1}\mid x_{t},x_0)$.

Now DDIM does not assume Markov and only assumes

$$
    X_t\mid X_0 \sim \mathcal{N}(\alpha_t X_0, \beta_t^2 I)
$$

where $\alpha_t^2+\beta_t^2=1.$ 
Why this? $\alpha_t=\bar\alpha^{\rm DDPM}_t,\beta_t=\bar\beta_t^{\rm DDPM}.$

We still hope for $p(x_{t-1}\mid x_t,x_0)$ in a closed form:

$$
    X_{t-1}\mid X_t,X_0 \sim \mathcal{N}(\tilde\mu(X_t,X_0),\sigma_t^2I)
$$

where $\tilde\mu(X_t,X_0)=\gamma_tX_t+\omega_tX_0$ TBD.
Since

$$
    X_t=\alpha_t X_0 + \beta_t\varepsilon_t,\quad 
    X_{t-1}=\gamma_tX_t+\omega_t X_0 + \sigma_t\bar\epsilon_t,
$$

where $\varepsilon_t,\bar\varepsilon_t$ are standard Gaussians,

$$
\alpha_{t-1}X_0+\beta_{t-1}\varepsilon_{t-1}
=X_{t-1}
    = \gamma_t(\alpha_tX_0+\beta_t\varepsilon_t)+\omega_t X_0 + \sigma_t\bar\epsilon_t.
$$

Then

$$
\alpha_t\gamma_t+\omega_t=\alpha_{t-1},\quad 
\sigma_t^2 = \beta_{t-1}^2+\gamma_t^2\beta_t^2.
$$

3 unknowns for 2 equtions. Say we are free to choose $\sigma_t$.

$$
\gamma_t = \beta_t^{-1}\sqrt{\sigma_t^2-\beta_{t-1}^2},\quad 
\omega_t = \alpha_{t-1}-\gamma_t\alpha_t.
$$

